import{j as e,$ as H,d as F,C as U,_ as L}from"./index-DkGTr8py.js";import{d as V,h as T,r as I}from"./router-CxMlH8iW.js";import{u as W,o as z,F as _,S as G,c as k,a as r}from"./SelectField-Ck3PxKFf.js";import{u as J}from"./useComonData--7Vu7jos.js";import{R as o}from"./RHFTextField-DDT445Gq.js";import{B as K}from"./ButtonLoading-dCTh3U0u.js";import{u as O,b as Q}from"./useCustomQuery-IJyj9qiq.js";import{R as X}from"./RotatingLoader-e2c5rSpZ.js";import{P as Y}from"./index-BHsG9LAZ.js";import{I as Z}from"./Image-CkmC2H9L.js";import{C as D,b as ee}from"./card-PeekMVMd.js";import"./headlessui-BRR0nG4s.js";import"./axios-BR179gNb.js";import"./module-D9RQCQ1g.js";const ae=k().shape({wardNo:r().required().label("Ward no"),holdingNo:r().required().label("Holding no"),consumerNo:r().required().label("Consumer no"),mobileNo:r().required().label("Mobile no"),Address:r().required().label("Address"),pinCode:r().required().label("Pin code")});function Ne(){var c,p,u,g,x,N;const{getAllUser:t}=J(),n=O({}),M=V(),{id:i}=T(),a=Q({api:"".concat(F.getConsumerDetailsById,"/").concat(i),options:{enabled:!!i}}),m=I.useMemo(()=>{var d,s,h,b,j,f,C,v,y,S,q,A,w,R,E,P,$;return{wardNo:String((s=(d=a==null?void 0:a.data)==null?void 0:d.data[0])==null?void 0:s.wardNo),holdingNo:(j=String((b=(h=a==null?void 0:a.data)==null?void 0:h.data[0])==null?void 0:b.holdingNo))!=null?j:"",consumerNo:(v=String((C=(f=a==null?void 0:a.data)==null?void 0:f.data[0])==null?void 0:C.consumerNo))!=null?v:"",mobileNo:(q=String((S=(y=a==null?void 0:a.data)==null?void 0:y.data[0])==null?void 0:S.mobileNo))!=null?q:"",Address:(R=String((w=(A=a==null?void 0:a.data)==null?void 0:A.data[0])==null?void 0:w.Address))!=null?R:"",pinCode:($=String((P=(E=a==null?void 0:a.data)==null?void 0:E.data[0])==null?void 0:P.pinCode))!=null?$:""}},[(c=a==null?void 0:a.data)==null?void 0:c.data[0]]),l=W({resolver:z(ae),defaultValues:m});I.useEffect(()=>{var d;(d=a==null?void 0:a.data)!=null&&d.data[0]&&l.reset(m)},[(p=a==null?void 0:a.data)==null?void 0:p.data[0].id]);const B=async d=>{U("Are you sure?","Please confirm",async()=>{try{const s=await n.mutateAsync({api:F.postEditConsumerDetail,data:{address:d.Address,consumerId:i,mobileNo:d.mobileNo,name:d.consumerNo,holdingNo:d.holdingNo,consumerTypeId:"",demandFrom:"",pincode:d.pinCode,wardNo:d.wardNo}});s.data.status?(L.success(s.data.msg),M("/deoghar-app/consumer-actions/".concat(i))):L.error(s.data.msg)}catch(s){}})};return e.jsx(Y,{title:"Update Consumer",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(Z,{src:"/assets/image/category.png",alt:"Update Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"font-semibold",children:"Update Consumer"}),e.jsx("p",{className:"text-xs text-gray-500",children:"solid west management system"})]})]}),e.jsx(H,{}),e.jsx(D,{children:e.jsx(ee,{children:e.jsx("div",{className:"p-4 md:p-5",children:a.isLoading?e.jsx("div",{className:"flex justify-center items-center h-[450px]",children:e.jsx(X,{})}):e.jsxs(_,{methods:l,onSubmit:l.handleSubmit(B),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(o,{name:"holdingNo",label:"Holding No",placeholder:"Enter Holding No",isRequired:!0})}),e.jsx("div",{children:e.jsx(G,{name:"wardNo",label:"Ward No",isRequired:!0,selectedText:"Select Ward No",data:(N=(x=(g=(u=t==null?void 0:t.data)==null?void 0:u.data[0].ulbDetails[0])==null?void 0:g.wards)==null?void 0:x.map(d=>({label:String(d),value:String(d)})))!=null?N:[]})}),e.jsx("div",{children:e.jsx(o,{disabled:!0,isRequired:!0,name:"consumerNo",label:"Consumer No",placeholder:"Enter Consumer No"})}),e.jsx("div",{children:e.jsx(o,{name:"mobileNo",label:"Mobile No",type:"number",isRequired:!0,placeholder:"Enter Mobile No",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(o,{name:"Address",label:"Address",placeholder:"Enter Address",isRequired:!0})}),e.jsx("div",{children:e.jsx(o,{name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",isRequired:!0,inputValidation:["zip"]})})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:e.jsx(K,{isLoading:n.isLoading,disabled:n.isLoading,size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{Ne as default};
