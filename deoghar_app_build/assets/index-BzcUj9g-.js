import{j as e,g as v}from"./index-Cn5xDO1F.js";import{b as F,r as w}from"./router-DQohkvhc.js";import{C as T,b as A}from"./card-C8izw3rS.js";import{P as $}from"./index-CQB-N8wg.js";import{P as B}from"./index-CivxP6ki.js";import{a as E,o as I,F as L,S as m,c as W,b as l}from"./SelectField-3rS98xnU.js";import{R as k}from"./RHFTextField-BuaeBQTq.js";import{B as C}from"./button-BUjwbGzf.js";import{a as R,b as z}from"./useCustomQuery-DkwPn-t_.js";import{u as V,a as q}from"./useComonData-CdBoG8Od.js";import{S as o}from"./separator-D7xTCwRY.js";import{I as G}from"./Image-0tXDnn-F.js";import"./headlessui-qWRqSxHB.js";import"./axios-DmypytPv.js";function H({consumerData:t}){const d=F();return t!=null&&t.isFetching?e.jsx(e.Fragment,{children:Array.from({length:10}).map((s,n)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},n+1))}):e.jsx(e.Fragment,{children:t.status==="success"?t.data.data.map(s=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer Name :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:s.consumerName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward No :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.wardNo})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Category :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.cansumerCategory})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Type :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.cansumerType})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Paid Status :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.paidStatus==="Paid"?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-green-500 text-green-500 rounded-lg",children:s.paidStatus}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-red-500 text-red-500 rounded-lg",children:s.paidStatus})})]}),e.jsx(o,{}),e.jsx("div",{className:"col-span-1 w-full",children:e.jsx(C,{onClick:()=>d(`/deoghar-app/consumer-actions/${s.id}`),variant:"outline",className:"w-full rounded-lg ",size:"sm",children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"VIEW DETAILS"})})})]})},s.id)):e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const _=W().shape({consumerCategory:l(),consumerNo:l(),consumertype:l(),wardNo:l().required().label("Ward no")});function te(){var u,g,h,p,j,y,N,f,b;const{getAllUser:t}=V(),{getConsumerAddFormData:d}=q(),[s,n]=w.useState(1),[x,S]=w.useState(10),r=E({resolver:I(_),defaultValues:{consumerCategory:"0",consumerNo:"",consumertype:"",wardNo:""}}),i=R({api:v.getConsumerListByCategory,config:{consumerCategory:r.watch("consumerCategory")=="0"?"":r.watch("consumerCategory"),consumerNo:r.watch("consumerNo"),consumertype:r.watch("consumertype"),wardNo:r.watch("wardNo"),page:s,perPage:x},value:[s,n],options:{enabled:s>1||s>10}}),c=z({api:`${v.getConsumerTypeByCategory}/${r.watch("consumerCategory")}`,options:{enabled:!!r.watch("consumerCategory")&&r.watch("consumerCategory")!="0"}}),P=async a=>{n(1),S(10),i.refetch()};return e.jsx(B,{title:"Search Consumer",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(G,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Search Consumer"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Search consumer details here."})]})]}),e.jsx(o,{}),e.jsx(T,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(A,{className:"px-6 text-sm",children:e.jsx(L,{methods:r,onSubmit:r.handleSubmit(P),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx(k,{name:"consumerNo",label:"Consumer No",className:"w-full"}),e.jsx("div",{children:e.jsx(m,{name:"wardNo",label:"Ward No",className:"w-full",data:((h=(g=(u=t==null?void 0:t.data)==null?void 0:u.data[0].ulbDetails[0])==null?void 0:g.wards)==null?void 0:h.map(a=>({label:String(a),value:String(a)})))??[]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(m,{name:"consumerCategory",label:"Consumer Category",className:"w-full",data:((y=(j=(p=d==null?void 0:d.data)==null?void 0:p.data)==null?void 0:j.consumerCategory)==null?void 0:y.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(m,{name:"consumertype",label:"Consumer Type",className:"w-full",data:((b=(f=(N=c==null?void 0:c.data)==null?void 0:N.data)==null?void 0:f.consumerTypeList)==null?void 0:b.map(a=>({label:String(a.name),value:String(a.id)})))??[]})})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(C,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),e.jsx(o,{}),e.jsx(H,{consumerData:i}),(i==null?void 0:i.status)==="success"&&e.jsxs(e.Fragment,{children:[e.jsx($,{page:s,perPage:x,totalPage:10,setPage:a=>n(a)}),e.jsx(o,{})]})]})})}export{te as default};
