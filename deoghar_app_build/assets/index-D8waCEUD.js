import{j as e,d as T,C as E,_ as b}from"./index-BlhGWuhU.js";import{d as H,h as I,r as M}from"./router-CTqkcgir.js";import{u as V,o as _,F as k,S as x,c as L,a as s}from"./SelectField-BZmqqZq3.js";import{P as W}from"./index-kzc0iliv.js";import{I as z}from"./Image-B_HEW2tY.js";import{C as G,b as J}from"./card-BzHT6fEs.js";import{S as K}from"./separator-BxQnrs51.js";import{a as O,b as Q}from"./useComonData-DlmHpCBB.js";import{u as U}from"./useMonthMap-C8hLMgQU.js";import{u as X,b as Y}from"./useCustomQuery-D9CW6J2n.js";import{g as Z}from"./services-KQnp_8oA.js";import{R as i}from"./RHFTextField-CIC62DP7.js";import{R as D}from"./RHFTextArea-wfbPvUTS.js";import{B as ee}from"./ButtonLoading-DeQIqFYa.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./moment-BjLXg0w5.js";const ae=L().shape({wardNo:s().required().label("Ward no"),holdingNo:s().required().label("Holding no"),consumerNo:s().required().label("Consumer no"),mobileNo:s().required().label("Mobile no"),demandFrom:s().required().label("Demand from"),consumerCategory:s().required().label("Consumer category"),consumerType:s().required().label("Consumer type"),renterName:s().required().label("Renter name"),pinCode:s().notRequired().label("Pin code"),address:s().required().label("Address")});function ye(){var N,y,j,f,C,v;const l=X({}),$=H(),{id:u}=I(),{getConsumerAddFormData:c}=O(),{resultList:p}=U("4-1-2022"),a=Y({api:`${T.getConsumerDetailsById}/${u}`,options:{enabled:!!u}}),h=M.useMemo(()=>{var r,o,n,t,d,R,S,q,F,A,w,P;return{wardNo:String((o=(r=a==null?void 0:a.data)==null?void 0:r.data[0])==null?void 0:o.wardNo)??"",holdingNo:String((t=(n=a==null?void 0:a.data)==null?void 0:n.data[0])==null?void 0:t.holdingNo)??"",consumerNo:String((R=(d=a==null?void 0:a.data)==null?void 0:d.data[0])==null?void 0:R.consumerNo)??"",consumerName:String((q=(S=a==null?void 0:a.data)==null?void 0:S.data[0])==null?void 0:q.consumerName)??"",mobileNo:"",demandFrom:"",consumerCategory:"",consumerType:"",renterName:"",address:String((A=(F=a==null?void 0:a.data)==null?void 0:F.data[0])==null?void 0:A.Address)??"",pinCode:String((P=(w=a==null?void 0:a.data)==null?void 0:w.data[0])==null?void 0:P.pinCode)??""}},[(N=a==null?void 0:a.data)==null?void 0:N.data[0]]),m=V({resolver:_(ae),defaultValues:h}),B=async r=>{E("Are you sure?","Please confirm",async()=>{var o,n,t;try{const d=await l.mutateAsync({api:T.postRenterForn,data:{consumerId:u,consumerCategory:r.consumerCategory,consumerName:r.renterName,consumerType:r.consumerType,demandFrom:r.demandFrom,holdingNo:r.holdingNo,mobileNo:r.mobileNo,pinCode:r.pinCode,address:r.address,wardNo:r.wardNo}});d.data.status?(b.success(d.data.msg),$(`/deoghar-app/consumer-actions/${(t=(n=(o=d==null?void 0:d.data)==null?void 0:o.data)==null?void 0:n.demandDetails[0])==null?void 0:t.consumer_id}`)):b.error(d.data.msg)}catch(d){b.error(Z(d))}})};M.useEffect(()=>{var r;(r=a==null?void 0:a.data)!=null&&r.data[0]&&m.reset(h)},[(y=a==null?void 0:a.data)==null?void 0:y.data[0].id]);const{consumerCategoryData:g}=Q(m.watch("consumerCategory"));return e.jsx(W,{title:"Add Renter",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(z,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Add Renter"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid west management system"})]})]}),e.jsx(K,{}),e.jsx(G,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(J,{className:"px-6 text-sm",children:e.jsx(k,{methods:m,onSubmit:m.handleSubmit(B),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 space-x-1",children:[e.jsx(i,{name:"wardNo",label:"Ward no",disabled:!0,isRequired:!0}),e.jsx(i,{name:"holdingNo",label:"Holding no",disabled:!0,isRequired:!0}),e.jsx("div",{children:e.jsx(x,{name:"consumerCategory",label:"Consumer Category",isRequired:!0,data:((C=(f=(j=c==null?void 0:c.data)==null?void 0:j.data)==null?void 0:f.consumerCategory)==null?void 0:C.map(r=>({label:String(r.name),value:String(r.id)})))??[]})}),e.jsx("div",{children:e.jsx(x,{name:"consumerType",label:"Consumer Type",isRequired:!0,data:((v=g==null?void 0:g.data)==null?void 0:v.data.consumerTypeList.map(r=>({label:String(r.name),value:String(r.id)})))??[]})}),e.jsx("div",{children:e.jsx(i,{name:"renterName",label:"Renter Name",isRequired:!0})}),e.jsx("div",{children:e.jsx(i,{type:"number",isRequired:!0,name:"mobileNo",label:"Mobile no",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(D,{name:"address",label:"Address",disabled:!0})}),e.jsx("div",{children:e.jsx(i,{type:"number",name:"pinCode",label:"Pin Code",inputValidation:["zip"],disabled:!0})}),e.jsx("div",{children:e.jsx(x,{name:"demandFrom",label:"Demand From",isRequired:!0,data:(p==null?void 0:p.map(r=>({label:String(r.str),value:String(r.str)})))??[]})}),e.jsx("div",{children:e.jsx(ee,{isLoading:l.isPending,disabled:l.isPending,type:"submit",className:"w-full mt-4",children:"Add Renter"})})]})})})})]})})}export{ye as default};
