import{j as e,$ as U,d as V,C as D,_ as l}from"./index-DwHfpNlX.js";import{d as T,h as W,r as z}from"./router-CxMlH8iW.js";import{u as M,o as _,F as G,S as H,c as k,a as d}from"./SelectField-DCQpvyE5.js";import{u as J}from"./useComonData-WfKdZXcd.js";import{R as o}from"./RHFTextField-C7tJVrRN.js";import{g as K}from"./services-KQnp_8oA.js";import{B as O}from"./ButtonLoading-BMnlbAnh.js";import{u as Q,b as X}from"./useCustomQuery-CJHa6I0o.js";import{R as Y}from"./RotatingLoader-otwOTVrX.js";import{P as Z}from"./index-B1FKUPV7.js";import{I as L}from"./Image-C1aMTGBV.js";import{C as B,b as I}from"./card-CP_wK8K2.js";import"./headlessui-BRR0nG4s.js";import"./axios-BR179gNb.js";import"./module-BOCHwcoi.js";const ee=k().shape({aptName:d().required("Apartment Name is required"),wardNo:d().required("Ward No is required"),aptCode:d().required("Apartment Type is required"),aptAddress:d().required("Apartment Category is required"),pinCode:d().required("Apartment Status is required")});function he(){var p,c,u,x,g,h;const F=T(),n=Q({}),{getAllUser:m}=J(),{id:i}=W(),a=X({api:"".concat((p=V)==null?void 0:p.getApartmentById,"?id=").concat(i),options:{enabled:!!i}}),t=M({resolver:_(ee),defaultValues:{aptName:"",wardNo:"",aptCode:"",aptAddress:"",pinCode:""}});z.useEffect(()=>{var s,r,f,j,N,A,C,b,v,q,w,R,S,$,E,P;(s=a==null?void 0:a.data)!=null&&s.data&&(t.setValue("aptName",(j=(f=(r=a==null?void 0:a.data)==null?void 0:r.data)==null?void 0:f.aptName)!=null?j:""),t.setValue("wardNo",(C=(A=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:A.wardNo)!=null?C:""),t.setValue("aptCode",(q=(v=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:v.aptCode)!=null?q:""),t.setValue("aptAddress",(S=(R=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:R.aptAddress)!=null?S:""),t.setValue("pinCode",(P=(E=($=a==null?void 0:a.data)==null?void 0:$.data)==null?void 0:E.pinCode)!=null?P:""))},[(c=a==null?void 0:a.data)==null?void 0:c.data]);const y=async s=>{D("Are you sure?","Please confirm",async()=>{try{const r=await n.mutateAsync({api:V.updateApartment,data:{apartmentId:i,apartmentName:s.aptName,wardNo:s.wardNo,apartmentCode:s.aptCode,address:s.aptAddress}});r.data.status?(l.success(r.data.msg),F("/deoghar-app/apartment-actions/".concat(i))):l.error(r.data.msg)}catch(r){l.error(K(r))}})};return e.jsx(Z,{title:"Update Apartment",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(L,{src:"/assets/image/category.png",alt:"Update Apartment",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"font-semibold",children:"Update Apartment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"solid west management system"})]})]}),e.jsx(U,{}),e.jsx(B,{children:e.jsx(I,{children:e.jsx("div",{className:"p-4 md:p-5",children:a.isLoading?e.jsx("div",{className:"flex justify-center items-center h-[450px]",children:e.jsx(Y,{})}):e.jsxs(G,{methods:t,onSubmit:t.handleSubmit(y),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(o,{isRequired:!0,name:"aptName",label:"Apartment Name",placeholder:"Enter Apartment Name",inputValidation:["removeDoubleSpace"]})}),e.jsx("div",{children:e.jsx(H,{name:"wardNo",isRequired:!0,label:"Ward No",selectedText:"Select Ward No",data:(h=(g=(x=(u=m==null?void 0:m.data)==null?void 0:u.data[0].ulbDetails[0])==null?void 0:x.wards)==null?void 0:g.map(s=>({label:String(s),value:String(s)})))!=null?h:[]})}),e.jsx("div",{children:e.jsx(o,{name:"aptCode",isRequired:!0,label:"Apartment Code",placeholder:"Enter Apartment Code"})}),e.jsx("div",{children:e.jsx(o,{name:"aptAddress",isRequired:!0,label:"Apartment Address",placeholder:"Enter Apartment Address"})}),e.jsx("div",{children:e.jsx(o,{type:"number",isRequired:!0,name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",inputValidation:["zip"]})})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:e.jsx(O,{isLoading:n.isLoading,disabled:n.isLoading,size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{he as default};
