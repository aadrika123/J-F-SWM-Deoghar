import{j as e,d as _,C as G,_ as b}from"./index-DkGTr8py.js";import{d as J,h as K,r as k}from"./router-CxMlH8iW.js";import{u as O,o as Q,F as U,S as x,c as X,a as s}from"./SelectField-Ck3PxKFf.js";import{P as Y}from"./index-BHsG9LAZ.js";import{I as Z}from"./Image-CkmC2H9L.js";import{C as D,b as ee}from"./card-PeekMVMd.js";import{S as ae}from"./separator-CQwNH3jY.js";import{a as re,b as de}from"./useComonData--7Vu7jos.js";import{u as se}from"./useMonthMap-DqC9yJdg.js";import{u as oe,b as te}from"./useCustomQuery-IJyj9qiq.js";import{g as ne}from"./services-KQnp_8oA.js";import{R as i}from"./RHFTextField-DDT445Gq.js";import{R as ie}from"./RHFTextArea-DcyasjVa.js";import{B as me}from"./ButtonLoading-dCTh3U0u.js";import"./headlessui-BRR0nG4s.js";import"./axios-BR179gNb.js";import"./moment-CbGOrKEH.js";const le=X().shape({wardNo:s().required().label("Ward no"),holdingNo:s().required().label("Holding no"),consumerNo:s().required().label("Consumer no"),mobileNo:s().required().label("Mobile no"),demandFrom:s().required().label("Demand from"),consumerCategory:s().required().label("Consumer category"),consumerType:s().required().label("Consumer type"),renterName:s().required().label("Renter name"),pinCode:s().notRequired().label("Pin code"),address:s().required().label("Address")});function Ae(){var N,y,j,f,C,v,R,S,q;const l=oe({}),W=J(),{id:u}=K(),{getConsumerAddFormData:c}=re(),{resultList:p}=se("4-1-2022"),a=te({api:"".concat(_.getConsumerDetailsById,"/").concat(u),options:{enabled:!!u}}),h=k.useMemo(()=>{var r,o,t,n,d,F,A,w,T,P,M,$,B,E,H,I,L,V;return{wardNo:(t=String((o=(r=a==null?void 0:a.data)==null?void 0:r.data[0])==null?void 0:o.wardNo))!=null?t:"",holdingNo:(F=String((d=(n=a==null?void 0:a.data)==null?void 0:n.data[0])==null?void 0:d.holdingNo))!=null?F:"",consumerNo:(T=String((w=(A=a==null?void 0:a.data)==null?void 0:A.data[0])==null?void 0:w.consumerNo))!=null?T:"",consumerName:($=String((M=(P=a==null?void 0:a.data)==null?void 0:P.data[0])==null?void 0:M.consumerName))!=null?$:"",mobileNo:"",demandFrom:"",consumerCategory:"",consumerType:"",renterName:"",address:(H=String((E=(B=a==null?void 0:a.data)==null?void 0:B.data[0])==null?void 0:E.Address))!=null?H:"",pinCode:(V=String((L=(I=a==null?void 0:a.data)==null?void 0:I.data[0])==null?void 0:L.pinCode))!=null?V:""}},[(N=a==null?void 0:a.data)==null?void 0:N.data[0]]),m=O({resolver:Q(le),defaultValues:h}),z=async r=>{G("Are you sure?","Please confirm",async()=>{var o,t,n;try{const d=await l.mutateAsync({api:_.postRenterForn,data:{consumerId:u,consumerCategory:r.consumerCategory,consumerName:r.renterName,consumerType:r.consumerType,demandFrom:r.demandFrom,holdingNo:r.holdingNo,mobileNo:r.mobileNo,pinCode:r.pinCode,address:r.address,wardNo:r.wardNo}});d.data.status?(b.success(d.data.msg),W("/deoghar-app/consumer-actions/".concat((n=(t=(o=d==null?void 0:d.data)==null?void 0:o.data)==null?void 0:t.demandDetails[0])==null?void 0:n.consumer_id))):b.error(d.data.msg)}catch(d){b.error(ne(d))}})};k.useEffect(()=>{var r;(r=a==null?void 0:a.data)!=null&&r.data[0]&&m.reset(h)},[(y=a==null?void 0:a.data)==null?void 0:y.data[0].id]);const{consumerCategoryData:g}=de(m.watch("consumerCategory"));return e.jsx(Y,{title:"Add Renter",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(Z,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Add Renter"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid west management system"})]})]}),e.jsx(ae,{}),e.jsx(D,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(ee,{className:"px-6 text-sm",children:e.jsx(U,{methods:m,onSubmit:m.handleSubmit(z),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 space-x-1",children:[e.jsx(i,{name:"wardNo",label:"Ward no",disabled:!0,isRequired:!0}),e.jsx(i,{name:"holdingNo",label:"Holding no",disabled:!0,isRequired:!0}),e.jsx("div",{children:e.jsx(x,{name:"consumerCategory",label:"Consumer Category",isRequired:!0,data:(v=(C=(f=(j=c==null?void 0:c.data)==null?void 0:j.data)==null?void 0:f.consumerCategory)==null?void 0:C.map(r=>({label:String(r.name),value:String(r.id)})))!=null?v:[]})}),e.jsx("div",{children:e.jsx(x,{name:"consumerType",label:"Consumer Type",isRequired:!0,data:(S=(R=g==null?void 0:g.data)==null?void 0:R.data.consumerTypeList.map(r=>({label:String(r.name),value:String(r.id)})))!=null?S:[]})}),e.jsx("div",{children:e.jsx(i,{name:"renterName",label:"Renter Name",isRequired:!0})}),e.jsx("div",{children:e.jsx(i,{type:"number",isRequired:!0,name:"mobileNo",label:"Mobile no",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(ie,{name:"address",label:"Address",disabled:!0})}),e.jsx("div",{children:e.jsx(i,{type:"number",name:"pinCode",label:"Pin Code",inputValidation:["zip"],disabled:!0})}),e.jsx("div",{children:e.jsx(x,{name:"demandFrom",label:"Demand From",isRequired:!0,data:(q=p==null?void 0:p.map(r=>({label:String(r.str),value:String(r.str)})))!=null?q:[]})}),e.jsx("div",{children:e.jsx(me,{isLoading:l.isLoading,disabled:l.isLoading,type:"submit",className:"w-full mt-4",children:"Add Renter"})})]})})})})]})})}export{Ae as default};
