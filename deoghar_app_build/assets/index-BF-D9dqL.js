import{j as e,g as u}from"./index-la4gHuXa.js";import{b as S,r as N}from"./router-DQohkvhc.js";import{C as A,b as P}from"./card-B5LHCMVv.js";import{P as F}from"./index-BdIhz9dv.js";import{P as C}from"./index-CsGSmyQk.js";import{a as $,o as I,F as L,S as f,c as k,b as c}from"./SelectField-C4pz_3Bi.js";import{R as E}from"./RHFTextField-2qswbLJb.js";import{B as v}from"./button--ybDpWiN.js";import{b}from"./useCustomQuery-DHvLYzCe.js";import{u as W}from"./useComonData-D52L1SPp.js";import{S as i}from"./separator-BfS78ucS.js";import{I as B}from"./Image-CQpUgjc7.js";import"./headlessui-qWRqSxHB.js";import"./axios-DmypytPv.js";function R({apartmentData:t}){const l=S();return t!=null&&t.isFetching?e.jsx(e.Fragment,{children:Array.from({length:10}).map((s,n)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},n+1))}):e.jsx(e.Fragment,{children:t.status==="success"?t.data.data.map(s=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Apartment Name :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:s.apartmentName})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward No :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.wardNo})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Apartment code :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.apartmentCode})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Demand upto :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.demandUpto})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Total demand :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.totalDemand})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Paid Status :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:s.paidStatus==="Paid"?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-green-500 text-green-500 rounded-lg",children:s.paidStatus}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold flex justify-start items-center border border-red-500 text-red-500 rounded-lg",children:s.paidStatus})})]}),e.jsx(i,{}),e.jsx("div",{className:"col-span-1 w-full",children:e.jsx(v,{onClick:()=>l(`/deoghar-app/apartment-actions/${s.id}`),variant:"outline",className:"w-full rounded-lg ",size:"sm",children:e.jsx("h1",{className:"text-xs font-semibold text-gray-600",children:"VIEW DETAILS"})})})]})},s.id)):e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const T=k().shape({apartmentId:c(),apartmentName:c(),wardNo:c()});function Z(){var o,x,p,h,g,j;const{getAllUser:t}=W(),[l,s]=N.useState(1),[n,y]=N.useState(10),a=$({resolver:I(T),defaultValues:{apartmentId:"",apartmentName:"",wardNo:""}}),d=b({api:`${u.getApartmentList}?
      ${a!=null&&a.watch("apartmentName")?`apartmentName=${a==null?void 0:a.watch("apartmentName")}`:`apartmentId=${a==null?void 0:a.watch("apartmentId")}`}`,key:"apartmentData",options:{enabled:!1}}),m=b({api:`${u.getApartmentListByWardNo}/${a.watch("wardNo")}`,options:{enabled:!!a.watch("wardNo")}}),w=async r=>{s(1),y(10),d.refetch()};return e.jsx(C,{title:"Search Apartment",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(B,{src:"/assets/image/apartment.png",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Search Apartment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Search apartment details here."})]})]}),e.jsx(i,{}),e.jsx(A,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(P,{className:"px-6 text-sm",children:e.jsx(L,{methods:a,onSubmit:a.handleSubmit(w),children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx(E,{name:"apartmentName",label:"Apartment name",className:"w-full"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{children:e.jsx(f,{name:"wardNo",label:"Ward No",className:"w-full",data:((p=(x=(o=t==null?void 0:t.data)==null?void 0:o.data[0].ulbDetails[0])==null?void 0:x.wards)==null?void 0:p.map(r=>({label:String(r),value:String(r)})))??[]})}),e.jsx("div",{children:e.jsx(f,{name:"apartmentId",label:"Apartment",className:"w-full",data:((j=(g=(h=m==null?void 0:m.data)==null?void 0:h.data)==null?void 0:g.apartmentList)==null?void 0:j.map(r=>({label:String(r.apt_name),value:String(r.id)})))??[]})})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(v,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),e.jsx(i,{}),e.jsx(R,{apartmentData:d}),(d==null?void 0:d.status)==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(F,{page:l,perPage:n,totalPage:10,setPage:r=>s(r)}),e.jsx(i,{})]})]})})}export{Z as default};
