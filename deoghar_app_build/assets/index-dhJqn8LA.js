import{j as s,B as h,u as b,d as y}from"./index-CuInqoRq.js";import{d as v,r as u}from"./router-CTqkcgir.js";import{C as w,b as S}from"./card-BlUMd8-Z.js";import{P as F}from"./index-DjPVIbdc.js";import{P}from"./index-CTfQp5AI.js";import{u as I,o as T,F as k,S as A,c as C,a as m}from"./SelectField-BhHroWGw.js";import{R as x}from"./RHFTextField-wMCrq3QB.js";import{a as Y}from"./useCustomQuery-LX2FaTUZ.js";import{c as _}from"./useComonData-CYDg_6Uz.js";import{S as i}from"./separator-B2XlZ15G.js";import{h as $}from"./moment-BjLXg0w5.js";import{I as z}from"./Image-CnV_2Eia.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./chevron-right-fpQxKEPl.js";function M({viewComplainListData:e}){var o,c;const d=v();return e!=null&&e.isFetching?s.jsx(s.Fragment,{children:Array.from({length:10}).map((a,l)=>s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx("div",{className:"animate-pulse flex space-x-4",children:s.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},l+1))}):s.jsx("div",{children:e.status==="success"?(c=(o=e==null?void 0:e.data)==null?void 0:o.data)==null?void 0:c.map((a,l)=>s.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 justify-center items-center",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer Name:"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:a.consumer_name}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Complain No:"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:a.complain_no}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:a.ward_no}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Date"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:$(a.date).format("DD-MM-YYYY")}),a.tcName!==null&&a.tcName!==void 0&&a.tcName!==""&&s.jsxs(s.Fragment,{children:[" ",s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"TC"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:a.tcName})]})]}),s.jsx(i,{className:"mt-4 mb-4"}),s.jsxs("div",{className:"flex justify-between mt-4 space-x-4",children:[s.jsx(h,{size:"sm",variant:"destructive",className:" w-full",onClick:()=>{d(`/deoghar-app/view-complain-detail/${a.id}`)},children:"View"}),s.jsx(h,{size:"sm",className:" w-full",onClick:()=>{d(`/deoghar-app/view-complain-map/${a.id}`)},children:"View Map"})]})]},l+1)):s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const R=C().shape({fromDate:m(),toDate:m(),tcId:m(),search:m()});function L(){var j,g,p,f;const{user:e}=b(),{getTcList:d}=_(),[o,c]=u.useState(1),[a,l]=u.useState(10),r=I({resolver:T(R)}),t=Y({api:y.getComplainList,config:{fromDate:r.watch("fromDate"),toDate:r.watch("toDate"),tcId:(e==null?void 0:e.userTypeId)==5||r.watch("tcId")!=""?r.watch("tcId"):"",search:r.watch("search")},options:{enabled:!0}}),N=async n=>{c(1),l(10),t.refetch()};return s.jsx(P,{title:"Complain List",children:s.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[s.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[s.jsx(z,{src:"/assets/icons/coins.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),s.jsxs("div",{className:"",children:[s.jsx("h1",{className:" font-semibold",children:"Complain List"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),s.jsx(i,{}),s.jsx(w,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:s.jsx(S,{className:"px-6 text-sm",children:s.jsx(k,{methods:r,onSubmit:r.handleSubmit(N),children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("div",{children:s.jsx(x,{name:"fromDate",label:"From Date",className:"w-full",type:"date"})}),s.jsx("div",{children:s.jsx(x,{name:"toDate",label:"To Date",className:"w-full",type:"date"})}),(e==null?void 0:e.userTypeId)==4&&s.jsx("div",{className:"col-span-2",children:s.jsx(A,{name:"tcId",label:"TC",className:"w-full",data:((g=(j=d==null?void 0:d.data)==null?void 0:j.data)==null?void 0:g.map(n=>({label:String(n.tcName),value:String(n.tcId)})))??[]})}),s.jsx("div",{className:"col-span-2",children:s.jsx(x,{name:"search",label:"Search",className:"w-full",placeholder:"Search by complain no"})}),s.jsx("div",{className:"col-span-2 mt-2",children:s.jsx(h,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),s.jsx(i,{}),s.jsx("div",{className:"flex justify-between item-center",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("h1",{className:"text-xs font-semibold",children:"Total Transaction:"}),s.jsx("h1",{className:"text-xs text-green-800 font-bold",children:((f=(p=t==null?void 0:t.data)==null?void 0:p.data)==null?void 0:f.length)??0})]})}),s.jsx(M,{viewComplainListData:t}),(t==null?void 0:t.status)==="success"&&s.jsxs(s.Fragment,{children:[s.jsx(F,{page:o,perPage:a,totalPage:10,setPage:n=>c(n)}),s.jsx(i,{})]})]})})}export{L as default};
