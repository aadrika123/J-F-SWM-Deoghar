import{u as I,h as M,j as a,$ as B,e as w,C as H,_ as P}from"./index-CXtUUCbV.js";import{d as L,h as U,r as E}from"./router-CTqkcgir.js";import{u as V,o as T,F as W,S as z,c as _,a as r}from"./SelectField-DPXFpVw2.js";import{u as G}from"./useComonData-DtqgMbD8.js";import{R as o}from"./RHFTextField-Bzo-ph-2.js";import{B as k}from"./ButtonLoading-mlhPIJSP.js";import{R as J}from"./RotatingLoader-DJ0yOAeh.js";import{P as K}from"./index-DoXc9tY9.js";import{I as O}from"./Image-DKjO37lb.js";import{C as Q,b as X}from"./card-LpAV_6Ya.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./module-bAFxkgNL.js";const Y=_().shape({wardNo:r().required().label("Ward no"),holdingNo:r().required().label("Holding no"),consumerNo:r().required().label("Consumer no"),consumerName:r().notRequired().label("Consumer name"),mobileNo:r().required().label("Mobile no"),Address:r().required().label("Address"),pinCode:r().required().label("Pin code")});function ce(){var c,u,p,N,g;const{getAllUser:t}=G(),n=I({}),$=L(),{id:i}=U(),e=M({api:`${w.getConsumerDetailsById}/${i}`,options:{enabled:!!i}}),m=E.useMemo(()=>{var d,s,x,h,b,j,f,C,v,y,S,q,R,A;return{wardNo:String((s=(d=e==null?void 0:e.data)==null?void 0:d.data[0])==null?void 0:s.wardNo),holdingNo:String((h=(x=e==null?void 0:e.data)==null?void 0:x.data[0])==null?void 0:h.holdingNo)??"",consumerNo:String((j=(b=e==null?void 0:e.data)==null?void 0:b.data[0])==null?void 0:j.consumerNo)??"",consumerName:String((C=(f=e==null?void 0:e.data)==null?void 0:f.data[0])==null?void 0:C.consumerName)??"",mobileNo:String((y=(v=e==null?void 0:e.data)==null?void 0:v.data[0])==null?void 0:y.mobileNo)??"",Address:String((q=(S=e==null?void 0:e.data)==null?void 0:S.data[0])==null?void 0:q.Address)??"",pinCode:String((A=(R=e==null?void 0:e.data)==null?void 0:R.data[0])==null?void 0:A.pinCode)??""}},[(c=e==null?void 0:e.data)==null?void 0:c.data[0]]),l=V({resolver:T(Y),defaultValues:m});E.useEffect(()=>{var d;(d=e==null?void 0:e.data)!=null&&d.data[0]&&l.reset(m)},[(u=e==null?void 0:e.data)==null?void 0:u.data[0].id]);const F=async d=>{H("Are you sure?","Please confirm",async()=>{try{const s=await n.mutateAsync({api:w.postEditConsumerDetail,data:{address:d.Address,consumerId:i,mobileNo:d.mobileNo,name:d.consumerName,holdingNo:d.holdingNo,consumerTypeId:"",demandFrom:"",pincode:d.pinCode,wardNo:d.wardNo}});s.data.status?(P.success(s.data.msg),$(`/deoghar-app/consumer-actions/${i}`)):P.error(s.data.msg)}catch{}})};return a.jsx(K,{title:"Update Consumer",children:a.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[a.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[a.jsx(O,{src:"/assets/image/category.png",alt:"Update Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),a.jsxs("div",{className:"",children:[a.jsx("h1",{className:"font-semibold",children:"Update Consumer"}),a.jsx("p",{className:"text-xs text-gray-500",children:"solid west management system"})]})]}),a.jsx(B,{}),a.jsx(Q,{children:a.jsx(X,{children:a.jsx("div",{className:"p-4 md:p-5",children:e.isLoading?a.jsx("div",{className:"flex justify-center items-center h-[450px]",children:a.jsx(J,{})}):a.jsxs(W,{methods:l,onSubmit:l.handleSubmit(F),children:[a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsx("div",{children:a.jsx(o,{name:"holdingNo",label:"Holding No",placeholder:"Enter Holding No",isRequired:!0})}),a.jsx("div",{children:a.jsx(o,{name:"consumerName",disabled:!0,label:"Consumer Name",placeholder:"Enter Consumer Name",isRequired:!0})}),a.jsx("div",{children:a.jsx(z,{name:"wardNo",label:"Ward No",isRequired:!0,selectedText:"Select Ward No",data:((g=(N=(p=t==null?void 0:t.data)==null?void 0:p.data[0].ulbDetails[0])==null?void 0:N.wards)==null?void 0:g.map(d=>({label:String(d),value:String(d)})))??[]})}),a.jsx("div",{children:a.jsx(o,{disabled:!0,isRequired:!0,name:"consumerNo",label:"Consumer No",placeholder:"Enter Consumer No"})}),a.jsx("div",{children:a.jsx(o,{name:"mobileNo",label:"Mobile No",type:"number",isRequired:!0,placeholder:"Enter Mobile No",inputValidation:["mobile"]})}),a.jsx("div",{children:a.jsx(o,{name:"Address",label:"Address",placeholder:"Enter Address",isRequired:!0})}),a.jsx("div",{children:a.jsx(o,{name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",isRequired:!0,inputValidation:["zip"]})})]}),a.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:a.jsx(k,{isLoading:n.isPending,disabled:n.isPending,size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{ce as default};
