import{j as e,d as F,C as P,_ as x}from"./index-D4tcPZKh.js";import{d as M,h as $,r as w}from"./router-CTqkcgir.js";import{u as B,o as E,F as H,S as b,c as I,a as o}from"./SelectField-nPvC-_S9.js";import{P as V}from"./index-ByoGyj-F.js";import{I as _}from"./Image-DybC7N7P.js";import{C as k,b as L}from"./card-azg1s1Sk.js";import{S as W}from"./separator-CVn_ld_L.js";import{a as z,b as G}from"./useComonData-BK2KdJXR.js";import{u as J}from"./useMonthMap-C8hLMgQU.js";import{u as K,b as O}from"./useCustomQuery-CtoH5cJV.js";import{g as Q}from"./services-KQnp_8oA.js";import{R as d}from"./RHFTextField-C1C-4v5v.js";import{R as U}from"./RHFTextArea-kt25FeFl.js";import{B as X}from"./ButtonLoading-D3Fgl0pj.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./moment-BjLXg0w5.js";const Y=I().shape({wardNo:o().required().label("Ward no"),holdingNo:o().required().label("Holding no"),consumerNo:o().required().label("Consumer no"),mobileNo:o().required().label("Mobile no"),demandFrom:o().required().label("Demand from"),consumerCategory:o().required().label("Consumer category"),consumerType:o().required().label("Consumer type"),renterName:o().required().label("Renter name"),pinCode:o(),address:o()});function xe(){var N,j,y,f,C,v;const l=K({}),A=M(),{id:u}=$(),{getConsumerAddFormData:c}=z(),{resultList:p}=J("4-1-2022"),r=O({api:`${F.getConsumerDetailsById}/${u}`,options:{enabled:!!u}}),h=w.useMemo(()=>{var a,n,t,i,s,R,S,q;return{wardNo:String((n=(a=r==null?void 0:r.data)==null?void 0:a.data[0])==null?void 0:n.wardNo)??"",holdingNo:String((i=(t=r==null?void 0:r.data)==null?void 0:t.data[0])==null?void 0:i.holdingNo)??"",consumerNo:String((R=(s=r==null?void 0:r.data)==null?void 0:s.data[0])==null?void 0:R.consumerNo)??"",consumerName:String((q=(S=r==null?void 0:r.data)==null?void 0:S.data[0])==null?void 0:q.consumerName)??"",mobileNo:"",demandFrom:"",consumerCategory:"",consumerType:"",renterName:"",address:""}},[(N=r==null?void 0:r.data)==null?void 0:N.data[0]]),m=B({resolver:E(Y),defaultValues:h}),T=async a=>{P("Are you sure?","Please confirm",async()=>{var n,t,i;try{const s=await l.mutateAsync({api:F.postRenterForn,data:{consumerId:u,consumerCategory:a.consumerCategory,consumerName:a.renterName,consumerType:a.consumerType,demandFrom:a.demandFrom,holdingNo:a.holdingNo,mobileNo:a.mobileNo,pinCode:a.pinCode,address:a.address,wardNo:a.wardNo}});s.data.status?(x.success(s.data.msg),A(`/deoghar-app/consumer-actions/${(i=(t=(n=s==null?void 0:s.data)==null?void 0:n.data)==null?void 0:t.demandDetails[0])==null?void 0:i.consumer_id}`)):x.error(s.data.msg)}catch(s){x.error(Q(s))}})};w.useEffect(()=>{var a;(a=r==null?void 0:r.data)!=null&&a.data[0]&&m.reset(h)},[(j=r==null?void 0:r.data)==null?void 0:j.data[0].id]);const{consumerCategoryData:g}=G(m.watch("consumerCategory"));return e.jsx(V,{title:"Add Renter",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(_,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Add Renter"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid west management system"})]})]}),e.jsx(W,{}),e.jsx(k,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(L,{className:"px-6 text-sm",children:e.jsx(H,{methods:m,onSubmit:m.handleSubmit(T),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 space-x-1",children:[e.jsx(d,{name:"wardNo",label:"Ward no",disabled:!0,isRequired:!0}),e.jsx(d,{name:"holdingNo",label:"Holding no",disabled:!0,isRequired:!0}),e.jsx(d,{name:"consumerNo",label:"Consumer no",disabled:!0,isRequired:!0}),e.jsx("div",{children:e.jsx(b,{name:"consumerCategory",label:"Consumer Category",isRequired:!0,data:((C=(f=(y=c==null?void 0:c.data)==null?void 0:y.data)==null?void 0:f.consumerCategory)==null?void 0:C.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(b,{name:"consumerType",label:"Consumer Type",isRequired:!0,data:((v=g==null?void 0:g.data)==null?void 0:v.data.consumerTypeList.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(d,{name:"renterName",label:"Renter Name",isRequired:!0})}),e.jsx("div",{children:e.jsx(d,{type:"number",isRequired:!0,name:"mobileNo",label:"Mobile no",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(U,{name:"address",label:"Address"})}),e.jsx("div",{children:e.jsx(d,{type:"number",name:"pinCode",label:"Pin Code",inputValidation:["zip"]})}),e.jsx("div",{children:e.jsx(b,{name:"demandFrom",label:"Demand From",isRequired:!0,data:(p==null?void 0:p.map(a=>({label:String(a.str),value:String(a.str)})))??[]})}),e.jsx("div",{children:e.jsx(X,{isLoading:l.isPending,disabled:l.isPending,type:"submit",className:"w-full mt-4",children:"Add Renter"})})]})})})})]})})}export{xe as default};
