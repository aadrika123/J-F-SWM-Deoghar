import{j as e,g as w,h as M,_ as c}from"./index-BcSDAYQy.js";import{d as P,h as $,r as R}from"./router-CTqkcgir.js";import{a as B,o as E,F as H,S as u,c as I,b as s}from"./SelectField-K2-9aOpB.js";import{P as V}from"./index-J44beZ8l.js";import{I as k}from"./Image-Bg3N0v8H.js";import{C as W,b as _}from"./card-BGFnyxWs.js";import{S as z}from"./separator-CnGhRSp5.js";import{a as G,b as J}from"./useComonData-RIbpgz2u.js";import{u as K}from"./useMonthMap-C8hLMgQU.js";import{u as L,b as O}from"./useCustomQuery-Dq0ecwmr.js";import{g as Q}from"./services-KQnp_8oA.js";import{R as n}from"./RHFTextField-BRu0HiXJ.js";import{R as U}from"./RHFTextArea-BXhFU1tH.js";import{B as X}from"./button-CsnK0fxW.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./moment-BjLXg0w5.js";const Y=I().shape({wardNo:s().required().label("Ward no"),holdingNo:s().required().label("Holding no"),consumerNo:s().required().label("Consumer no"),mobileNo:s().required().label("Mobile no"),demandFrom:s().required().label("Demand from"),consumerCategory:s().required().label("Consumer category"),consumerType:s().required().label("Consumer type"),renterName:s().required().label("Renter name"),pinCode:s(),address:s()});function xe(){var g,x,b,h,N,y;const A=L({}),T=P(),{id:d}=$(),{getConsumerAddFormData:m}=G(),{resultList:i}=K("4-1-2022"),r=O({api:`${w.getConsumerDetailsById}/${d}`,options:{enabled:!!d}}),p=R.useMemo(()=>{var a,o,j,f,C,v,S,F;return{wardNo:String((o=(a=r==null?void 0:r.data)==null?void 0:a.data[0])==null?void 0:o.wardNo)??"",holdingNo:String((f=(j=r==null?void 0:r.data)==null?void 0:j.data[0])==null?void 0:f.holdingNo)??"",consumerNo:String((v=(C=r==null?void 0:r.data)==null?void 0:C.data[0])==null?void 0:v.consumerNo)??"",consumerName:String((F=(S=r==null?void 0:r.data)==null?void 0:S.data[0])==null?void 0:F.consumerName)??"",mobileNo:"",demandFrom:"",consumerCategory:"",consumerType:"",renterName:"",address:""}},[(g=r==null?void 0:r.data)==null?void 0:g.data[0]]),t=B({resolver:E(Y),defaultValues:p}),q=async a=>{M("Are you sure to pay?","Please confirm",async()=>{try{const o=await A.mutateAsync({api:w.postRenterForn,data:{consumerId:d,consumerCategory:a.consumerCategory,consumerName:a.renterName,consumerType:a.consumerType,demandFrom:a.demandFrom,holdingNo:a.holdingNo,mobileNo:a.mobileNo,pinCode:a.pinCode,address:a.address,wardNo:a.wardNo}});o.data.status?(c.success(o.data.msg),T(`/deoghar-app/consumer-actions/${d}`)):c.error(o.data.msg)}catch(o){c.error(Q(o))}})};R.useEffect(()=>{var a;(a=r==null?void 0:r.data)!=null&&a.data[0]&&t.reset(p)},[(x=r==null?void 0:r.data)==null?void 0:x.data[0].id]);const{consumerCategoryData:l}=J(t.watch("consumerCategory"));return e.jsx(V,{title:"Add Renter",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(k,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Add Renter"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid west management system"})]})]}),e.jsx(z,{}),e.jsx(W,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(_,{className:"px-6 text-sm",children:e.jsx(H,{methods:t,onSubmit:t.handleSubmit(q),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 space-x-1",children:[e.jsx(n,{name:"wardNo",label:"Ward no",disabled:!0}),e.jsx(n,{name:"holdingNo",label:"Holding no",disabled:!0}),e.jsx(n,{name:"consumerName",label:"Consumer no",disabled:!0}),e.jsx("div",{children:e.jsx(u,{name:"consumerCategory",label:"Consumer Category",data:((N=(h=(b=m==null?void 0:m.data)==null?void 0:b.data)==null?void 0:h.consumerCategory)==null?void 0:N.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(u,{name:"consumerType",label:"Consumer Type",data:((y=l==null?void 0:l.data)==null?void 0:y.data.consumerTypeList.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(n,{name:"renterName",label:"Renter Name"})}),e.jsx("div",{children:e.jsx(n,{type:"number",name:"mobileNo",label:"Mobile no",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(U,{name:"address",label:"Address"})}),e.jsx("div",{children:e.jsx(n,{type:"number",name:"pinCode",label:"Pin Code",inputValidation:["zip"]})}),e.jsx("div",{children:e.jsx(u,{name:"demandFrom",label:"Demand From",data:(i==null?void 0:i.map(a=>({label:String(a.str),value:String(a.str)})))??[]})}),e.jsx("div",{children:e.jsx(X,{type:"submit",className:"w-full mt-4",children:"Add Renter"})})]})})})})]})})}export{xe as default};
