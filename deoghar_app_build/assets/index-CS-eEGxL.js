import{j as s,d as P}from"./index-DDBl9555.js";import{r as b}from"./router-CTqkcgir.js";import{C as F,b as A}from"./card-CjYhmd1s.js";import{P as Y}from"./index-DppEtJVR.js";import{P as T}from"./index-rhBaYdYa.js";import{h as v}from"./moment-BjLXg0w5.js";import{u as k,o as R,F as B,S as m,c as L,a as n}from"./SelectField-JgfnMCYN.js";import{R as w}from"./RHFTextField-DObLdURv.js";import{B as M}from"./button-C237c5Ap.js";import{a as E}from"./useCustomQuery-Drtt0bmr.js";import{u as G,a as I,b as W}from"./useComonData-Zu5OpCYT.js";import{S as i}from"./separator-BqncX2Xy.js";import{I as $}from"./Image-Cn_wY8YA.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";function z({denialData:t}){var d;return t!=null&&t.isFetching?s.jsx(s.Fragment,{children:Array.from({length:10}).map((e,o)=>s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx("div",{className:"animate-pulse flex space-x-4",children:s.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},o+1))}):s.jsx("div",{children:t.status==="success"?(d=t.data.data)==null?void 0:d.map((e,o)=>s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm mt-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 justify-center items-center",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer no/APT no :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:e!=null&&e.apartmentCode?e==null?void 0:e.apartmentCode:e==null?void 0:e.consumerNo}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer Name / APT Name :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e!=null&&e.apartmentName?e==null?void 0:e.apartmentName:e==null?void 0:e.consumerName}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.wardNo}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Amount :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.outstandingAmount}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Deny by :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.denyBy}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Deny date time :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.denyDate}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Address :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.address}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Remark :"}),s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:e.remarks})]})},o+1)):s.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const H=L().shape({fromDate:n(),toDate:n(),category:n(),type:n(),wardNo:n().nullable()});function ds(){var x,g,h,p,u,j,f,y,N;const{getAllUser:t}=G(),{getConsumerAddFormData:d}=I(),[e,o]=b.useState(1),[S,D]=b.useState(10),r=k({resolver:R(H),defaultValues:{fromDate:v().format("YYYY-MM-DD"),toDate:v().format("YYYY-MM-DD"),category:"",type:"",wardNo:""}}),l=E({api:P.getdenialNotification,config:{fromDate:r.watch("fromDate"),toDate:r.watch("toDate"),category:r.watch("category"),type:r.watch("type"),wardNo:r.watch("wardNo")},options:{enabled:!1}}),C=async a=>{o(1),D(10),l.refetch()},{consumerCategoryData:c}=W(String(r.watch("category")));return s.jsx(T,{title:"Denial List",children:s.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[s.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[s.jsx($,{src:"/assets/image/deactivate.png",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),s.jsxs("div",{className:"",children:[s.jsx("h1",{className:" font-semibold",children:"Denial List"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),s.jsx(i,{}),s.jsx(F,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:s.jsx(A,{className:"px-6 text-sm",children:s.jsx(B,{methods:r,onSubmit:r.handleSubmit(C),children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("div",{children:s.jsx(w,{name:"fromDate",label:"From Date",className:"w-full",type:"date"})}),s.jsx("div",{children:s.jsx(w,{name:"toDate",label:"To Date",className:"w-full",type:"date"})}),s.jsx("div",{className:"col-span-2",children:s.jsx(m,{name:"wardNo",label:"Ward",className:"w-full",data:((h=(g=(x=t==null?void 0:t.data)==null?void 0:x.data[0].ulbDetails[0])==null?void 0:g.wards)==null?void 0:h.map(a=>({label:String(a),value:String(a)})))??[]})}),s.jsx("div",{children:s.jsx(m,{name:"category",label:"Category",className:"w-full",data:((j=(u=(p=d==null?void 0:d.data)==null?void 0:p.data)==null?void 0:u.consumerCategory)==null?void 0:j.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),s.jsx("div",{children:s.jsx(m,{name:"type",label:"Consumer Type",className:"w-full",data:((N=(y=(f=c==null?void 0:c.data)==null?void 0:f.data)==null?void 0:y.consumerTypeList)==null?void 0:N.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),s.jsx("div",{className:"col-span-2 mt-2",children:s.jsx(M,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),s.jsx(i,{}),s.jsx(z,{denialData:l}),(l==null?void 0:l.status)==="success"&&s.jsxs(s.Fragment,{children:[s.jsx(Y,{page:e,perPage:S,totalPage:10,setPage:a=>o(a)}),s.jsx(i,{})]})]})})}export{ds as default};
