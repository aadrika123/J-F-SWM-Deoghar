import{j as e,$,d as v,C as y,_ as n}from"./index-DuK7PHPF.js";import{d as E,h as P,r as V}from"./router-CTqkcgir.js";import{u as F,o as R,F as U,S as D,c as T,a as d}from"./SelectField-ByPRpwPg.js";import{u as W}from"./useComonData-BqxQDqo1.js";import{R as i}from"./RHFTextField-DZ93QXib.js";import{g as z}from"./services-KQnp_8oA.js";import{B as M}from"./button-BI-NVyGK.js";import{u as _,b as G}from"./useCustomQuery-DDCo7QNB.js";import{R as H}from"./RotatingLoader-VY-0V7Qf.js";import{P as k}from"./index-D7LoKDI4.js";import{I as J}from"./Image-CZepX6vL.js";import{C as K,b as O}from"./card-DneID4sd.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./module-Blw9N4d7.js";const Q=T().shape({aptName:d().required("Apartment Name is required"),wardNo:d().required("Ward No is required"),aptCode:d().required("Apartment Type is required"),aptAddress:d().required("Apartment Category is required"),pinCode:d().required("Apartment Status is required")});function ne(){var p,l,c,u;const w=E(),q=_({}),{getAllUser:m}=W(),{id:o}=P(),a=G({api:`${(p=v)==null?void 0:p.getApartmentById}?id=${o}`,options:{enabled:!!o}}),r=F({resolver:R(Q),defaultValues:{aptName:"",wardNo:"",aptCode:"",aptAddress:"",pinCode:""}});V.useEffect(()=>{var s,t,x,h,f,g,j,N,A,C,b;(s=a==null?void 0:a.data)!=null&&s.data&&(r.setValue("aptName",((x=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:x.aptName)??""),r.setValue("wardNo",((f=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:f.wardNo)??""),r.setValue("aptCode",((j=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:j.aptCode)??""),r.setValue("aptAddress",((A=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:A.aptAddress)??""),r.setValue("pinCode",((b=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:b.pinCode)??""))},[a]);const S=async s=>{y("Are you sure to pay?","Please confirm",async()=>{try{const t=await q.mutateAsync({api:v.updateApartment,data:{apartmentId:o,apartmentName:s.aptName,wardNo:s.wardNo,apartmentCode:s.aptCode,address:s.aptAddress}});t.data.status?(n.success(t.data.msg),w(`/deoghar-app/apartment-actions/${o}`)):n.error(t.data.msg)}catch(t){n.error(z(t))}})};return e.jsx(k,{title:"Update Apartment",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(J,{src:"/assets/image/category.png",alt:"Update Apartment",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"font-semibold",children:"Update Apartment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"solid west management system"})]})]}),e.jsx($,{}),e.jsx(K,{children:e.jsx(O,{children:e.jsx("div",{className:"p-4 md:p-5",children:a.isLoading?e.jsx("div",{className:"flex justify-center items-center h-[450px]",children:e.jsx(H,{})}):e.jsxs(U,{methods:r,onSubmit:r.handleSubmit(S),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(i,{name:"aptName",label:"Apartment Name",placeholder:"Enter Apartment Name",inputValidation:["removeDoubleSpace"]})}),e.jsx("div",{children:e.jsx(D,{name:"wardNo",label:"Ward No",selectedText:"Select Ward No",data:((u=(c=(l=m==null?void 0:m.data)==null?void 0:l.data[0].ulbDetails[0])==null?void 0:c.wards)==null?void 0:u.map(s=>({label:String(s),value:String(s)})))??[]})}),e.jsx("div",{children:e.jsx(i,{name:"aptCode",label:"Apartment Code",placeholder:"Enter Apartment Code"})}),e.jsx("div",{children:e.jsx(i,{name:"aptAddress",label:"Apartment Address",placeholder:"Enter Apartment Address"})}),e.jsx("div",{children:e.jsx(i,{type:"number",name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",inputValidation:["zip"]})})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:e.jsx(M,{size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{ne as default};
