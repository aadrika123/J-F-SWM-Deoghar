import{j as e,u as y,d as v}from"./index-DDBl9555.js";import{d as w,r as N}from"./router-CTqkcgir.js";import{C as S,b as P}from"./card-CjYhmd1s.js";import{P as Y}from"./index-DppEtJVR.js";import{P as F}from"./index-rhBaYdYa.js";import{h}from"./moment-BjLXg0w5.js";import{u as I,o as D,F as M,S as T,c as k,a as n}from"./SelectField-JgfnMCYN.js";import{R as x}from"./RHFTextField-DObLdURv.js";import{B as j}from"./button-C237c5Ap.js";import{a as A}from"./useCustomQuery-Drtt0bmr.js";import{c as C}from"./useComonData-Zu5OpCYT.js";import{S as i}from"./separator-BqncX2Xy.js";import{I as _}from"./Image-Cn_wY8YA.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";function $({viewComplainListData:s}){var m,c;const r=w();return s!=null&&s.isFetching?e.jsx(e.Fragment,{children:Array.from({length:10}).map((a,l)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"animate-pulse flex space-x-4",children:e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})},l+1))}):e.jsx("div",{children:s.status==="success"?(c=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:c.map((a,l)=>e.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 justify-center items-center",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Consumer Name:"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500 w-30 truncate",children:a.consumer_name}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Complain No:"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:a.complain_no}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Ward :"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:a.ward_no}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"Date"}),e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:h(a.date).format("DD-MM-YYYY")})]}),e.jsx(i,{className:"mt-4 mb-4"}),e.jsxs("div",{className:"flex justify-between mt-4 space-x-4",children:[e.jsx(j,{size:"sm",variant:"destructive",className:" w-full",onClick:()=>{r(`/deoghar-app/view-complain-detail/${a.id}`)},children:"View"}),e.jsx(j,{size:"sm",className:" w-full",onClick:()=>{r(`/deoghar-app/view-complain-map/${a.id}`)},children:"View Map"})]})]},l+1)):e.jsx("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"text-sm font-semibold text-gray-500",children:"No Data Found"})})})})}const z=k().shape({fromDate:n(),toDate:n(),tcId:n(),search:n()});function L(){var g,p,f,u;const{user:s}=y(),{getTcList:r}=C(),[m,c]=N.useState(1),[a,l]=N.useState(10),d=I({resolver:D(z),defaultValues:{fromDate:h().format("YYYY-MM-DD"),toDate:h().format("YYYY-MM-DD"),tcId:"",search:""}}),t=A({api:v.getComplainList,config:{fromDate:d.watch("fromDate"),toDate:d.watch("toDate"),tcId:(s==null?void 0:s.userTypeId)==5?d.watch("tcId"):s==null?void 0:s.id,search:d.watch("search")},options:{enabled:!0}}),b=async o=>{c(1),l(10),t.refetch()};return e.jsx(F,{title:"Complain List",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(_,{src:"/assets/icons/coins.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Complain List"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid waste management system"})]})]}),e.jsx(i,{}),e.jsx(S,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(P,{className:"px-6 text-sm",children:e.jsx(M,{methods:d,onSubmit:d.handleSubmit(b),children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx(x,{name:"fromDate",label:"From Date",className:"w-full",type:"date"})}),e.jsx("div",{children:e.jsx(x,{name:"toDate",label:"To Date",className:"w-full",type:"date"})}),(s==null?void 0:s.userTypeId)==4&&e.jsx("div",{className:"col-span-2",children:e.jsx(T,{name:"tcId",label:"TC",className:"w-full",data:((p=(g=r==null?void 0:r.data)==null?void 0:g.data)==null?void 0:p.map(o=>({label:String(o.tcName),value:String(o.tcId)})))??[]})}),e.jsx("div",{className:"col-span-2",children:e.jsx(x,{name:"search",label:"Search",className:"w-full",placeholder:"Search by complain no"})}),e.jsx("div",{className:"col-span-2 mt-2",children:e.jsx(j,{type:"submit",variant:"default",size:"sm",className:"rounded-md w-24",children:"Search"})})]})})})}),e.jsx(i,{}),e.jsx("div",{className:"flex justify-between item-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("h1",{className:"text-xs font-semibold",children:"Total Transaction:"}),e.jsx("h1",{className:"text-xs text-green-800 font-bold",children:((u=(f=t==null?void 0:t.data)==null?void 0:f.data)==null?void 0:u.length)??0})]})}),e.jsx($,{viewComplainListData:t}),(t==null?void 0:t.status)==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{page:m,perPage:a,totalPage:10,setPage:o=>c(o)}),e.jsx(i,{})]})]})})}export{L as default};
