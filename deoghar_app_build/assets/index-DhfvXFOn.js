import{j as e,d as R,C as q,_ as u}from"./index-CKexVv7f.js";import{d as M,h as $,r as A}from"./router-CTqkcgir.js";import{u as B,o as E,F as H,S as p,c as I,a as s}from"./SelectField-CJOU9OFV.js";import{P as V}from"./index-BHeHt4x3.js";import{I as k}from"./Image-CXKymwKi.js";import{C as L,b as W}from"./card-0XrvENI5.js";import{S as _}from"./separator-BnIc1-si.js";import{a as z,b as G}from"./useComonData-Mkhus79Y.js";import{u as J}from"./useMonthMap-C8hLMgQU.js";import{u as K,b as O}from"./useCustomQuery-Bm7Wew5S.js";import{g as Q}from"./services-KQnp_8oA.js";import{R as n}from"./RHFTextField-D3c84PJ-.js";import{R as U}from"./RHFTextArea-Oz-pEu4V.js";import{B as X}from"./ButtonLoading-DeNqAQPL.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./moment-BjLXg0w5.js";const Y=I().shape({wardNo:s().required().label("Ward no"),holdingNo:s().required().label("Holding no"),consumerNo:s().required().label("Consumer no"),mobileNo:s().required().label("Mobile no"),demandFrom:s().required().label("Demand from"),consumerCategory:s().required().label("Consumer category"),consumerType:s().required().label("Consumer type"),renterName:s().required().label("Renter name"),pinCode:s(),address:s()});function xe(){var x,b,h,N,y,j;const m=K({}),T=M(),{id:d}=$(),{getConsumerAddFormData:i}=z(),{resultList:l}=J("4-1-2022"),r=O({api:`${R.getConsumerDetailsById}/${d}`,options:{enabled:!!d}}),g=A.useMemo(()=>{var a,o,f,C,v,S,F,w;return{wardNo:String((o=(a=r==null?void 0:r.data)==null?void 0:a.data[0])==null?void 0:o.wardNo)??"",holdingNo:String((C=(f=r==null?void 0:r.data)==null?void 0:f.data[0])==null?void 0:C.holdingNo)??"",consumerNo:String((S=(v=r==null?void 0:r.data)==null?void 0:v.data[0])==null?void 0:S.consumerNo)??"",consumerName:String((w=(F=r==null?void 0:r.data)==null?void 0:F.data[0])==null?void 0:w.consumerName)??"",mobileNo:"",demandFrom:"",consumerCategory:"",consumerType:"",renterName:"",address:""}},[(x=r==null?void 0:r.data)==null?void 0:x.data[0]]),t=B({resolver:E(Y),defaultValues:g}),P=async a=>{q("Are you sure to pay?","Please confirm",async()=>{try{const o=await m.mutateAsync({api:R.postRenterForn,data:{consumerId:d,consumerCategory:a.consumerCategory,consumerName:a.renterName,consumerType:a.consumerType,demandFrom:a.demandFrom,holdingNo:a.holdingNo,mobileNo:a.mobileNo,pinCode:a.pinCode,address:a.address,wardNo:a.wardNo}});o.data.status?(u.success(o.data.msg),T(`/deoghar-app/consumer-actions/${d}`)):u.error(o.data.msg)}catch(o){u.error(Q(o))}})};A.useEffect(()=>{var a;(a=r==null?void 0:r.data)!=null&&a.data[0]&&t.reset(g)},[(b=r==null?void 0:r.data)==null?void 0:b.data[0].id]);const{consumerCategoryData:c}=G(t.watch("consumerCategory"));return e.jsx(V,{title:"Add Renter",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(k,{src:"/assets/icons/searchConsumer.svg",alt:"Add Consumer",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:" font-semibold",children:"Add Renter"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Solid west management system"})]})]}),e.jsx(_,{}),e.jsx(L,{className:"overflow-hidden py-4","x-chunk":"dashboard-05-chunk-4",children:e.jsx(W,{className:"px-6 text-sm",children:e.jsx(H,{methods:t,onSubmit:t.handleSubmit(P),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 space-x-1",children:[e.jsx(n,{name:"wardNo",label:"Ward no",disabled:!0}),e.jsx(n,{name:"holdingNo",label:"Holding no",disabled:!0}),e.jsx(n,{name:"consumerName",label:"Consumer no",disabled:!0}),e.jsx("div",{children:e.jsx(p,{name:"consumerCategory",label:"Consumer Category",data:((y=(N=(h=i==null?void 0:i.data)==null?void 0:h.data)==null?void 0:N.consumerCategory)==null?void 0:y.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(p,{name:"consumerType",label:"Consumer Type",data:((j=c==null?void 0:c.data)==null?void 0:j.data.consumerTypeList.map(a=>({label:String(a.name),value:String(a.id)})))??[]})}),e.jsx("div",{children:e.jsx(n,{name:"renterName",label:"Renter Name"})}),e.jsx("div",{children:e.jsx(n,{type:"number",name:"mobileNo",label:"Mobile no",inputValidation:["mobile"]})}),e.jsx("div",{children:e.jsx(U,{name:"address",label:"Address"})}),e.jsx("div",{children:e.jsx(n,{type:"number",name:"pinCode",label:"Pin Code",inputValidation:["zip"]})}),e.jsx("div",{children:e.jsx(p,{name:"demandFrom",label:"Demand From",data:(l==null?void 0:l.map(a=>({label:String(a.str),value:String(a.str)})))??[]})}),e.jsx("div",{children:e.jsx(X,{isLoading:m.isPending,disabled:m.isPending,type:"submit",className:"w-full mt-4",children:"Add Renter"})})]})})})})]})})}export{xe as default};
