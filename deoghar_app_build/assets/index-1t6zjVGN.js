import{u as S,h as $,j as e,I as E,$ as V,e as w,C as F,_ as m}from"./index-D3K5dCwF.js";import{d as y,h as U,r as D}from"./router-CTqkcgir.js";import{u as T,o as W,F as z,S as M,c as _,a as d}from"./SelectField-BTYuOn0F.js";import{u as G}from"./useComonData-QczHDig1.js";import{R as o}from"./RHFTextField-D5U-Gney.js";import{g as H}from"./services-KQnp_8oA.js";import{B as k}from"./ButtonLoading-DnPmwJq3.js";import{R as J}from"./RotatingLoader-D3mWH3Zx.js";import{P as K}from"./index-C65HdOTd.js";import{C as O,b as Q}from"./card-C0cDAegY.js";import"./headlessui-BV7w-sRG.js";import"./axios-DmypytPv.js";import"./module-B--5YRvA.js";const X=_().shape({aptName:d().required("Apartment Name is required"),wardNo:d().required("Ward No is required"),aptCode:d().required("Apartment Type is required"),aptAddress:d().required("Apartment Category is required"),pinCode:d().required("Apartment Status is required")});function ne(){var p,c,u,x,g;const P=y(),n=S({}),{getAllUser:l}=G(),{id:i}=U(),a=$({api:`${(p=w)==null?void 0:p.getApartmentById}?id=${i}`,options:{enabled:!!i}}),t=T({resolver:W(X),defaultValues:{aptName:"",wardNo:"",aptCode:"",aptAddress:"",pinCode:""}});D.useEffect(()=>{var s,r,h,j,N,f,A,C,b,v,q;(s=a==null?void 0:a.data)!=null&&s.data&&(t.setValue("aptName",((h=(r=a==null?void 0:a.data)==null?void 0:r.data)==null?void 0:h.aptName)??""),t.setValue("wardNo",((N=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:N.wardNo)??""),t.setValue("aptCode",((A=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:A.aptCode)??""),t.setValue("aptAddress",((b=(C=a==null?void 0:a.data)==null?void 0:C.data)==null?void 0:b.aptAddress)??""),t.setValue("pinCode",((q=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:q.pinCode)??""))},[(c=a==null?void 0:a.data)==null?void 0:c.data]);const R=async s=>{F("Are you sure?","Please confirm",async()=>{try{const r=await n.mutateAsync({api:w.updateApartment,data:{apartmentId:i,apartmentName:s.aptName,wardNo:s.wardNo,apartmentCode:s.aptCode,address:s.aptAddress}});r.data.status?(m.success(r.data.msg),P(`/deoghar-app/apartment-actions/${i}`)):m.error(r.data.msg)}catch(r){m.error(H(r))}})};return e.jsx(K,{title:"Update Apartment",children:e.jsxs("main",{className:"py-6 grid grid-cols-1 gap-4 px-4",children:[e.jsxs("div",{className:"flex space-x-3 items-center justify-start",children:[e.jsx(E,{src:"/assets/image/category.png",alt:"Update Apartment",className:"w-11 h-11 rounded-lg bg-gray-200 p-2"}),e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"font-semibold",children:"Update Apartment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"solid west management system"})]})]}),e.jsx(V,{}),e.jsx(O,{children:e.jsx(Q,{children:e.jsx("div",{className:"p-4 md:p-5",children:a.isLoading?e.jsx("div",{className:"flex justify-center items-center h-[450px]",children:e.jsx(J,{})}):e.jsxs(z,{methods:t,onSubmit:t.handleSubmit(R),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(o,{isRequired:!0,name:"aptName",label:"Apartment Name",placeholder:"Enter Apartment Name",inputValidation:["removeDoubleSpace"]})}),e.jsx("div",{children:e.jsx(M,{name:"wardNo",isRequired:!0,label:"Ward No",selectedText:"Select Ward No",data:((g=(x=(u=l==null?void 0:l.data)==null?void 0:u.data[0].ulbDetails[0])==null?void 0:x.wards)==null?void 0:g.map(s=>({label:String(s),value:String(s)})))??[]})}),e.jsx("div",{children:e.jsx(o,{name:"aptCode",isRequired:!0,label:"Apartment Code",placeholder:"Enter Apartment Code"})}),e.jsx("div",{children:e.jsx(o,{name:"aptAddress",isRequired:!0,label:"Apartment Address",placeholder:"Enter Apartment Address"})}),e.jsx("div",{children:e.jsx(o,{type:"number",isRequired:!0,name:"pinCode",label:"Pin Code",placeholder:"Enter Pin Code",inputValidation:["zip"]})})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6 mb-2",children:e.jsx(k,{isLoading:n.isPending,disabled:n.isPending,size:"sm",type:"submit",className:"w-20",children:"Update"})})]})})})})]})})}export{ne as default};
